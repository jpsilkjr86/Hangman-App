<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Hangman App</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  </head>

  <body>
    <div class="container">

      <!-- Put text in jumbotron for visibility -->
    	<div class="jumbotron text-center">

	        <h1>Let's play hangman!</h1>

	        <!-- Empty elements, replaced by JavaScript functions during certain events -->
	        <p><span id="gameBoardText" class="text-success"></span></p>

			<p><span id="gameMsgText" class="text-muted">Press ENTER to get started.</span></p>

	        <p><strong><span id="gameResultText" class="text-primary"></span></strong></p>

	        <p><span id="lettersGuessedText" class="text-warning"></span></p>

	        <p><span id="attemptsRemainingText" class="text-danger"></span></p>

	        <p><strong><span id="gameBoardText" class="text-success"></span></strong></p>

    	</div>
    </div>

    <!-- BEGIN JAVASCRIPT -->
    <script type="text/javascript">
      
		// ******PSEUDO-CODE******

		// 1) HTML page displays game screen with CSS styles

		// 2) Dipslay "Press any key to start" - Game waits until any key is pressed before starting

		// 3) User Presses Key, Game Function Starts

		//    i) Generate random answer word (from libray or list?)

		//    ii) Display a game board with a series of blanks equal to the number of characters in the answer word

		//    iii) User presses key to guess a letter

		//    iv) Call function to compare guess letter to each letter of the answer word

		//       a) if right, change game board to include all letters matching the guessed letter

		//       b) if wrong, take one life away

		//       c) if all letters are correct, display victory

		//    v) Loop through 3-ii, 3-iii and 3-iv items above until attempts remaining run out or until word is guessed


		// ******DECLARE VARIABLES*******
		var gameWordAnswer = "";
		var gameOver = true;
		var attemptsRemaining = 10;  
		var letterGuessed = "";	 // user input variable for guessed letters
		
		var numOfGuessedLetters = 0;   // to be used as the index for lettersGuessedArray[] when adding new letters
		var lettersGuessedArray = [""];  //running list of all guessed letters, right and wrong.

		var gameBoardArray = [""];  // Running list of correct letters, i.e. the user's Hangman Game Board
		// var correctLetterPositions = [];  //to be used when assigning correct letters to gameBoardArray.



		// ******INITIALIZE GAME****** -- onkeyup event starts the gameFunction program IF gameOver is true
		
		if (gameOver)
		{
			document.onkeyup = function(event)
			{
			   if (event.keyCode === 13)
			   {
			   	console.log("return pressed");
			   	console.log("before gameFunction is called, gameOver = " + gameOver);
			   	document.getElementById("gameMsgText").innerHTML = "Now press any letter key to guess a letter!";
			   	gameFunction();
			   }
			}
		}


		// ******DECLARE FUNCTIONS*******

		// MAIN GAME FUNCTION -- to carry out and order all tasks, called when user presses a key (see above)
		function gameFunction ()
		{
			console.log("Game starts");

			// Set gameOver to false and attemptsRemaining to 10 at beginning of every game
			gameOver = false;
			attemptsRemaining = 10;

			// Set initial values to zero or empty at beginning of each game.
			letterGuessed = ""; lettersGuessedArray = [""];
			numOfGuessedLetters = 0;

			// Generate one random game word -- choose from a pre-set library?
			gameWordAnswer = genGameWord();
			console.log("gameWordAnswer: " + gameWordAnswer);

			// Generate game board, same length as gameWordAnswer but letters replace by spaces.
			gameBoardArray = genGameBoard();
			console.log("gameBoardArray: " + gameBoardArray);

			// Print game board (initial is all blank)
			printGameBoard();

			// Main game procresses, triggered by input between keycodes 65 (a) and 90 (z)
			document.onkeyup = function(event)
			{			   
			   if (event.keyCode >= 65 && event.keyCode <= 90)
			   {
			   		letterGuessed = event.key;
					document.getElementById("gameMsgText").innerHTML = "You guessed: " + letterGuessed;

					if (wasLetterAlreadyGuessed() == true)
					{
						document.getElementById("gameResultText").innerHTML = "Letter was already guessed.";
					}

					else 
					{						
						lettersGuessedArray[numOfGuessedLetters] = letterGuessed;
						numOfGuessedLetters++;
						console.log("numOfGuessedLetters: " + numOfGuessedLetters);
						document.getElementById("lettersGuessedText").innerHTML = "List of Guessed Letters: " + lettersGuessedArray;

						if (isLetterCorrect() == true)
						{
							gameBoardArray = updateGameBoard(gameBoardArray);
							printGameBoard();
							console.log("gameBoardArray: " + gameBoardArray);
							document.getElementById("gameResultText").innerHTML = "Match! See game board.";
						}
						else 
						{
							document.getElementById("gameResultText").innerHTML = "Incorrect guess. Try again!";
							attemptsRemaining--;
							document.getElementById("attemptsRemainingText").innerHTML = "Attempts Remaining: " + attemptsRemaining;
						}
					}						
			   } //end of keycode input conditional 
			} //end of document.onkeyup
		} //end gameFunction


		function genGameWord()
		{
			return "testword";
		}


		function genGameBoard()
		{
			var arrayX = [""];
			for (g=0; g<gameWordAnswer.length; g++)
			{
				arrayX[g] = " " + "_" + " ";
			}
			console.log("arrayX: " + arrayX);
			return arrayX;
		}

		function printGameBoard()
		{
			// .join is a function i looked up that converts an array of characters into a string.
			var stringX = gameBoardArray.join(" ");
			document.getElementById("gameBoardText").innerHTML = stringX;
		}

		function wasLetterAlreadyGuessed()
		{
			for (i=0; i<26; i++)
			{
				if (lettersGuessedArray[i] === letterGuessed)
				{ return true; }
			}
			// if function exits the loop then must return false
			return false;
		}

		function isLetterCorrect()
		{
			for (j=0; j<gameWordAnswer.length; j++)
			{
				if (gameWordAnswer[j] === letterGuessed)
				{ return true; }
			}
			// if function exits the loop then must return false
			return false;
		}

		function updateGameBoard(arrayY)
		{
			for (k=0; k<gameWordAnswer.length; k++)
			{
				if (gameWordAnswer[k] === letterGuessed)
				{ arrayY[k] = letterGuessed; }
			}
			// always return arrayY at the end
			return arrayY;
		}

    </script>
    
  </body>
</html>